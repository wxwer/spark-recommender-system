这是秒杀模块，用户注册认证以及物品管理依赖于基于spark的推荐系统中的BusinessServerDemo子项目。主要做的功能有： 1.限流：基于Alibaba Sentinel来实现秒杀接口限流，此外还实现了基于漏桶的限流，基于redis计数的限流。 2.缓存预热：通过定时任务定时上架近期秒杀商品到redis进行预热库存，访问秒杀场次信息和商品信息时，只需要查询redis缓存。 3.防止链接暴露：上架商品时，会生成商品的随机码防止链接暴露恶意被刷。 4.防止重复下单：以用户id和商品id作为key，通过redis的setIfAbsent命令占位来实现，如果用户未下过单，则设置key并返回true，否则返回false组织用户重复下单。 5.分布式锁：通过分布式锁来预扣库存，信号量的值初始设置位商品库存，每次用户要秒杀时则信号量减去秒杀的商品数量，如果信号值为0则说明没有库存，返回失败。 6.异步生成订单：如果用户抢到信号量，则生成一个订单信息，并将这个订单信息发生给kafka消息队列，由kafka的消费者获取消息并异步创建订单，进行流量削峰。 7.事务管理：在kafka消费者生成订单时，扣数据库库存和生成订单到数据库应该为一个事务操作，在事务失败时需要回滚数据库的值，并需要恢复分布式锁的信号值，以及删除用户已下单的占位。 8.结合nginx还可以做负载均衡，由保存在redis中token来进行用户token共享，由redis中的用户占位来避免重复下单问题。 9.还实现了用户查看支付/未支付订单，用户支付订单，用户取消订单时恢复信号量等操作。 同时保证了并发性和可靠性。